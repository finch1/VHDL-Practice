libary ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity uart_rx is generic(
 DBIT: integer:=8;    --# databits
 SB_TICK: integer:=16 --# ticks for stop bits
 );
port(
  clk, reset: in std_logic;
  rx: in std_logic;
  s_tick: in std_logic;
  rx_done_tick: out std_logic;
  dout: out std_logic_vector (7 downto 0)
  );
end uart_rx;

architecture arch of uart_rx is
  type state_type is (idle, start, data, stop);
  signal state_reg, state_next: state_type;
  signal s_reg, s_next: unsigned(3 downto 0);
  signal n_reg, n_next: unsigned(2 downto 0);
  signal b_reg, b_next: std_logic_vector(7 downto 0);
 